@model BookReviewWeb.Models.Book

@{
    // Calculate average rating
    double averageRating = Model.Reviews.Any() ? (double)Model.Reviews.Average(r => r.Rating) : 0;
    int reviewCount = Model.Reviews.Count;
    bool hasReviews = reviewCount > 0;
}

<div class="rating-container">
    <div class="ratings">
        @for (int i = 1; i <= 5; i++)
        {
            if (i <= averageRating)
            {
                <i class="fa-solid fa-star text-warning"></i>
            }
            else if (i - 0.5 <= averageRating)
            {
                <i class="fa-solid fa-star-half-stroke text-warning"></i>
            }
            else
            {
                <i class="fa-regular fa-star text-muted"></i>
            }
        }
    </div>
    @if (hasReviews)
    {
        <span class="rating-text">@averageRating.ToString("F1") (@reviewCount @(reviewCount == 1 ? "review" : "reviews"))</span>
    }
    else
    {
        <span class="rating-text">No reviews yet</span>
    }
</div> 